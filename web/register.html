<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>ÄÄƒng kÃ½ tÃ i khoáº£n</title>
    <link rel="stylesheet" href="css/register.css" />
  </head>
  <body>
    <div class="form-container">
      <h1>ÄÄƒng kÃ½ tÃ i khoáº£n</h1>
      <form id="register-form">
        <div class="form-group">
          <label for="username"
            >TÃªn Ä‘Äƒng nháº­p <span class="required">*</span></label
          >
          <input
            type="text"
            id="username"
            required
            placeholder="Nháº­p tÃªn Ä‘Äƒng nháº­p"
          />
        </div>

        <div class="form-group">
          <label for="email">Email <span class="required">*</span></label>
          <input
            type="email"
            id="email"
            required
            placeholder="Nháº­p Ä‘á»‹a chá»‰ email"
          />
        </div>

        <div class="form-group">
          <label for="password">Máº­t kháº©u <span class="required">*</span></label>
          <input
            type="password"
            id="password"
            required
            placeholder="Nháº­p máº­t kháº©u"
          />
        </div>

        <div class="form-group">
          <label for="confirm-password"
            >XÃ¡c nháº­n máº­t kháº©u <span class="required">*</span></label
          >
          <input
            type="password"
            id="confirm-password"
            required
            placeholder="Nháº­p láº¡i máº­t kháº©u"
          />
        </div>

        <div class="form-group">
          <label for="fullname">Há» vÃ  tÃªn</label>
          <input type="text" id="fullname" placeholder="Nháº­p há» vÃ  tÃªn" />
        </div>

        <div class="form-group">
          <label for="phone">Sá»‘ Ä‘iá»‡n thoáº¡i</label>
          <input type="tel" id="phone" placeholder="Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i" />
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="agree-terms" />
          <label for="agree-terms">
            TÃ´i Ä‘á»“ng Ã½ vá»›i
            <a href="#" class="terms-link">Ä‘iá»u khoáº£n sá»­ dá»¥ng</a>
            <span class="required">*</span>
          </label>
        </div>

        <div class="submit-btn" id="submit-btn">
          <button type="submit">ÄÄƒng kÃ½</button>
        </div>
      </form>
    </div>

    <script>
      const checkbox = document.getElementById("agree-terms");
      const submitBtn = document.getElementById("submit-btn");

      // Hiá»ƒn thá»‹ nÃºt Ä‘Äƒng kÃ½ khi tick Ä‘iá»u khoáº£n
      checkbox.addEventListener("change", () => {
        submitBtn.style.display = checkbox.checked ? "block" : "none";
      });

      document
        .getElementById("register-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const username = document.getElementById("username").value.trim();
          const email = document.getElementById("email").value.trim();
          const password = document.getElementById("password").value.trim();
          const confirmPassword = document
            .getElementById("confirm-password")
            .value.trim();
          const fullname = document.getElementById("fullname").value.trim();
          const phone = document.getElementById("phone").value.trim();

          if (!username || !email || !password || !confirmPassword) {
            alert("â— Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin báº¯t buá»™c!");
            return;
          }

          if (password !== confirmPassword) {
            alert("âŒ Máº­t kháº©u vÃ  xÃ¡c nháº­n máº­t kháº©u khÃ´ng khá»›p!");
            return;
          }

          if (password.length < 6) {
            alert("â— Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±!");
            return;
          }

          if (!checkbox.checked) {
            alert("â— Báº¡n pháº£i Ä‘á»“ng Ã½ vá»›i Ä‘iá»u khoáº£n sá»­ dá»¥ng!");
            return;
          }

          // Láº¥y danh sÃ¡ch tÃ i khoáº£n tá»« localStorage
          let users = JSON.parse(localStorage.getItem("users")) || [];

          // Kiá»ƒm tra tÃªn Ä‘Äƒng nháº­p Ä‘Ã£ tá»“n táº¡i chÆ°a
          const usernameExists = users.some(
            (user) => user.username === username
          );
          if (usernameExists) {
            alert("â— TÃªn Ä‘Äƒng nháº­p Ä‘Ã£ tá»“n táº¡i. Vui lÃ²ng chá»n tÃªn khÃ¡c.");
            return;
          }

          // Táº¡o tÃ i khoáº£n má»›i
          const newUser = {
            username,
            email,
            password,
            fullname,
            phone,
          };

          users.push(newUser);
          localStorage.setItem("users", JSON.stringify(users));

          alert("ğŸ‰ ÄÄƒng kÃ½ thÃ nh cÃ´ng!");
          window.location.href = "dangnhap.html";
          this.reset();
          submitBtn.style.display = "none";
        });
    </script>
  </body>
</html>
